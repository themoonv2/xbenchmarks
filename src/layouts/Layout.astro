---
import "../styles/global.css";
import Breadcrumbs from "../components/Breadcrumbs.astro";

interface Props {
	title: string;
	description?: string;
}

const { title, description = "Comprehensive Laptop, CPU, and GPU database." } =
	Astro.props;

// Get the current URL for canonical tag
const canonicalURL = new URL(Astro.url.pathname, Astro.site);
---

<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="description" content={description} />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<link rel="canonical" href={canonicalURL} />
		<meta name="generator" content={Astro.generator} />
		<title>{title}</title>
	</head>
	<body>
		<header class="site-header">
			<div class="container flex justify-between items-center">
				<a href="/" class="site-logo"
					>Electrical Escape</a
				>

				<button
					class="hamburger"
					id="hamburger"
					aria-label="Toggle menu"
				>
					<span></span>
					<span></span>
					<span></span>
				</button>

				<nav id="nav-menu">
					<a href="/laptop-brands"
						>Laptops</a
					>
					<a href="/cpus">CPUs</a>
					<a href="/gpus">GPUs</a>
					<a href="/laptops-cpu-ranking"
						>Laptop Processor Ranking</a
					>
					<a href="/laptops-gpu-ranking"
						>Laptop GPU Ranking</a
					>
					<a href="/compare">Comparisons</a>
				</nav>
			</div>
		</header>

		<main class="container section">
			<Breadcrumbs />
			<slot />
		</main>

		<footer class="site-footer">
			<div class="container">
				<p>
					&copy; {new Date().getFullYear()} Electrical Escape. All rights
					reserved.
				</p>
			</div>
		</footer>

		<script>
			const hamburger = document.getElementById("hamburger");
			const navMenu = document.getElementById("nav-menu");

			hamburger?.addEventListener("click", () => {
				hamburger.classList.toggle("active");
				navMenu?.classList.toggle("active");
			});

			// Close menu when clicking a link
			navMenu?.querySelectorAll("a").forEach((link) => {
				link.addEventListener("click", () => {
					hamburger?.classList.remove("active");
					navMenu?.classList.remove("active");
				});
			});
		</script>
	</body>
</html>

<style>
	.site-header {
		border-bottom: var(--border-primary);
		padding: var(--space-4) 0;
		background: var(--color-bg);
		position: sticky;
		top: 0;
		z-index: 10;
	}

	.site-logo {
		font-weight: 700;
		font-size: var(--text-lg);
		text-transform: uppercase;
		text-decoration: none;
		letter-spacing: -0.05em;
		border: 1px solid transparent;
	}

	.site-logo:hover {
		text-decoration: none;
	}

	/* Hamburger Menu */
	.hamburger {
		display: none;
		flex-direction: column;
		gap: 4px;
		background: none;
		border: 1px solid var(--color-border);
		padding: 8px;
		cursor: pointer;
		width: 40px;
		height: 40px;
		justify-content: center;
		align-items: center;
	}

	.hamburger span {
		display: block;
		width: 20px;
		height: 2px;
		background: var(--color-text);
		transition: all 0.3s ease;
	}

	.hamburger.active span:nth-child(1) {
		transform: rotate(45deg) translate(5px, 5px);
	}

	.hamburger.active span:nth-child(2) {
		opacity: 0;
	}

	.hamburger.active span:nth-child(3) {
		transform: rotate(-45deg) translate(5px, -5px);
	}

	nav {
		display: flex;
		gap: var(--space-4);
	}

	nav a {
		font-size: var(--text-sm);
		font-weight: 500;
		text-decoration: none;
		padding: var(--space-1) var(--space-2);
		border: 1px solid transparent;
	}

	nav a:hover {
		border-color: var(--color-border);
		border-radius: var(--radius-sm);
	}

	/* Mobile Styles */
	@media (max-width: 768px) {
		.hamburger {
			display: flex;
		}

		nav {
			position: fixed;
			top: 73px; /* Below header */
			right: -100%;
			width: 250px;
			height: calc(100vh - 73px);
			background: var(--color-bg);
			border-left: var(--border-primary);
			flex-direction: column;
			padding: var(--space-6) var(--space-4);
			gap: var(--space-2);
			transition: right 0.3s ease;
		}

		nav.active {
			right: 0;
		}

		nav a {
			padding: var(--space-3);
			border: var(--border-primary);
			display: block;
		}
	}

	.site-footer {
		border-top: var(--border-primary);
		padding: var(--space-6) 0;
		font-size: var(--text-xs);
		color: var(--color-text-muted);
		text-align: center;
		margin-top: auto;
	}
</style>
